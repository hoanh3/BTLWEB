const app = {
    listProduct: [
        {
            pathImg: '${url}/images/Products/product1.png',
            name: 'DISSOLVE 3D T-SHIRT/RED',
            vendor: 'VERGENCY',
            priceOld: '420.000đ',
            priceNew: '59.000đ',
            saleOff: '-86%',
            listSlideImg: [
                '//product.hstatic.net/200000305259/product/new_v67_fred_5-01_a2588c48f7c6422c814e391997248ee8_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v67_fred_1_eb8d2f24a022436693b3d525276b3b74_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v67_fred_2_b3c9283cd17a468283d395614ad1f90e_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v67_fred_3_d17727d19a104fe8b441379293912e45_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v67_fred_4_e0d45ace3b0a465490f5d6fd6cfb6ff3_large.jpg',
                '//product.hstatic.net/200000305259/product/vgc-mockup_tee_hand_fred_4deafd5478a04e2981be42942bf2e40d_large.jpg',
                '//product.hstatic.net/200000305259/product/vgc-mockup_tee_fabric_fred_25860086039b4839bcb6413cb9e7d04a_large.jpg'
            ]
        },
        {
            pathImg: '${url}/images/Products/product2.png',
            name: 'DISSOLVE 3D T-SHIRT/DARK GREY',
            vendor: 'VERGENCY',
            priceOld: '420.000đ',
            priceNew: '59.000đ',
            saleOff: '-86%',
            listSlideImg: [
                '//product.hstatic.net/200000305259/product/vgc-mockup_tee_art_v67-02_f0a296d11fdb4cd3bb90047b3c3bdbd7_small.jpg',
                '//product.hstatic.net/200000305259/product/new_v67_gry_1_a5584c0516b84099babb3b70c2e1bfb8_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v67_gry_3_100eb41a7134496abd70ae99ab5a4b8a_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v67_gry_3_100eb41a7134496abd70ae99ab5a4b8a_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v67_gry_4_b0f9e6dbe0f748fc846c03d094ea3060_large.jpg',
                '//product.hstatic.net/200000305259/product/vgc-new_tee_sleeve_grey_6f876d016f9f4e418e7bb9bc7479cef0_large.jpg',
                '//product.hstatic.net/200000305259/product/vgc-mockup_tee_fabric_grey_6ff0442a27454ff4922695ccf5e4fe2b_large.jpg'
            ]
        },
        {
            pathImg: '${url}/images/Products/product3.png',
            name: 'DISSOLVE 3D T-SHIRT/DARK BROW',
            vendor: 'VERGENCY',
            priceOld: '420.000đ',
            priceNew: '59.000đ',
            saleOff: '-86%',
            listSlideImg: [
                '//product.hstatic.net/200000305259/product/vgc-mockup_tee_art_v67-04_db922dc8d6564d89bfdf2fa6523edf27_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v67_brn_1_cff72d15acfb4a0a91bedbdb5df8829b_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v67_brn_3_2b0ee92b1dd54d488beab3f5ac95879b_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v67_brn_2_0a9ca2400f85425688e26dfe9c3b9e00_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v67_brn_4_8551cd1de3f04bf285c94679eec5481a_large.jpg',
                '//product.hstatic.net/200000305259/product/vgc-new_tee_sleeve_brn_ee4a301ac22540b1b19cdb49a69ea057_large.jpg',
                '//product.hstatic.net/200000305259/product/vgc-mockup_tee_fabric_brn_d50c70ad790a485c94f490eb69e768d7_large.jpg'
            ]
        },
        {
            pathImg: '${url}/images/Products/product4.png',
            name: 'DIY T-SHIRT/DARK GREY',
            vendor: 'VERGENCY',
            priceOld: '420.000đ',
            priceNew: '59.000đ',
            saleOff: '-86%',
            listSlideImg: [
                '//product.hstatic.net/200000305259/product/vgc-mockup_tee_art_v49-03_6b7000c7027f4203bbc1dc48c4ab3f8c_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v49_gry_1_f0499d92801f4f5784a83d495b1e93d4_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v49_gry_3_40c8044a1c4244b4bd380dcfd1eb37e2_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v49_gry_2_dace51b1d52b445ca321e9f0036a4657_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v49_gry_4_6211af95715c44fe91ca867988c37e9f_large.jpg',
                '//product.hstatic.net/200000305259/product/vgc-new_tee_sleeve_grey_7dd5210611b74e16b0d7b9dc309ac62f_large.jpg',
                '//product.hstatic.net/200000305259/product/vgc-mockup_tee_fabric_grey_0707666a3ba34b7ca8798517798224c2_large.jpg'
            ]
        },
        {
            pathImg: '${url}/images/Products/product5.png',
            name: 'MAKE T-SHIRT/RED',
            vendor: 'VERGENCY',
            priceOld: '420.000đ',
            priceNew: '59.000đ',
            saleOff: '-86%',
            listSlideImg: [
                '//product.hstatic.net/200000305259/product/new_v69_fred_5-01_0c7104beef514d8d88169f5779d9a4bb_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v69_fred_1_00fda673900e45948b46c696681b9e72_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v69_fred_2_1f8a779822d54deaae9dd8037056236c_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v69_fred_3_876347e1526346e9a3ee7e04aa93f8c1_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v69_fred_4_fdde8894c6c44ec38664c42ea8997f3d_large.jpg',
                '//product.hstatic.net/200000305259/product/vgc-mockup_tee_hand_fred_7a62538a89a0460cb9bc0212509b99ca_large.jpg',
                '//product.hstatic.net/200000305259/product/vgc-mockup_tee_fabric_fred_ec9a8d7a1d3c4fbc8e12e172955a3dbc_large.jpg'
            ]
        },
        {
            pathImg: '${url}/images/Products/product6.png',
            name: 'MAKE T-SHIRT/DARK GREY',
            vendor: 'VERGENCY',
            priceOld: '420.000đ',
            priceNew: '59.000đ',
            saleOff: '-86%',
            listSlideImg: [
                '//product.hstatic.net/200000305259/product/vgc-mockup_tee_art_v69-03_55fda8353d9d4e40a769fe8571313608_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v69_gry_1_59c13686617f4c3091b53ee7a67afb43_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v69_gry_3_d321c07a6b114c31881608aea5ef5ea7_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v69_gry_2_2beef31ebebc4e669628a72c66e43781_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v69_gry_4_96661ad947b64460ac31720f9d061a7b_large.jpg',
                '//product.hstatic.net/200000305259/product/vgc-new_tee_sleeve_grey_8c73ef9a39e14d90b7234632d058210d_large.jpg',
                '//product.hstatic.net/200000305259/product/vgc-mockup_tee_fabric_grey_99958b8ebcd74dd8a6992176e04bada8_large.jpg'
            ]
        },
        {
            pathImg: '${url}/images/Products/product7.png',
            name: 'ANCIENT ASIA T-SHIRT/DARK GREY',
            vendor: 'VERGENCY',
            priceOld: '420.000đ',
            priceNew: '59.000đ',
            saleOff: '-86%',
            listSlideImg: [
                '//product.hstatic.net/200000305259/product/vgc-mockup_tee_art_v57-02_1939e3296cf2498cb4834c0d4e665856_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v57_gry_1_bbe66a11649b4fd3ba03e504c4a6d062_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v57_gry_3_45f2f8770b394a4e88f6e5becefaa620_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v57_gry_2_afba2f447e0949a4bf8112ab26a2c44c_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v57_gry_4_c104462790e84e8389be0df90d90c96b_large.jpg',
                '//product.hstatic.net/200000305259/product/vgc-new_tee_sleeve_grey_f17abbba098545ddbd6ef216c3405bc3_large.jpg',
                '//product.hstatic.net/200000305259/product/vgc-mockup_tee_fabric_grey_7ca5065f8ab4408aa463cc5bb431031e_large.jpg'
            ]
        },
        {
            pathImg: '${url}/images/Products/product8.png',
            name: 'TYPO T-SHIRT/RED',
            vendor: 'VERGENCY',
            priceOld: '420.000đ',
            priceNew: '59.000đ',
            saleOff: '-86%',
            listSlideImg: [
                '//product.hstatic.net/200000305259/product/new_v66_fred_5-01_ff4877bccaec4273ae93c2d7c6dd987e_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v66_fred_5-01_ff4877bccaec4273ae93c2d7c6dd987e_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v66_fred_2_d693be0e0242477bbdcb241318a9610e_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v66_fred_3_5aa63eb2d00b40818d5610ecf3615e63_large.jpg',
                '//product.hstatic.net/200000305259/product/new_v66_fred_4_8d2cbb48f1db4e889d517a6c56fd468f_large.jpg',
                '//product.hstatic.net/200000305259/product/vgc-mockup_tee_hand_fred_744e8287117d45208d1319de65ae69c7_large.jpg',
                '//product.hstatic.net/200000305259/product/vgc-mockup_tee_fabric_fred_8580509409f3447a8172fc7efe48d768_large.jpg'
            ]
        },
    ],

    render: function() {
        const html = this.listProduct.map((product, index) => {
            return `
                <div class="col l-3 m-4 c-6">
                    <div class="product-information">
                        <a href="#" class="product-item">
                            <div class="product-item__img" style="background-image: url(${product.pathImg});"></div>
                            <h4 class="product-item__name">${product.name}</h4>
                            <p class="product-item__vendor">${product.vendor}</p>
                            <div class="product-item__review">
                                <span class="rating">
                                    <i class="star-yellow fa-solid fa-star"></i>
                                    <i class="star-yellow fa-solid fa-star"></i>
                                    <i class="star-yellow fa-solid fa-star"></i>
                                    <i class="star-yellow fa-solid fa-star"></i>
                                    <i class="fa-solid fa-star"></i>
                                </span>
                            </div>
                            <div class="product-item__price">
                                <span class="price-old">${product.priceOld}</span>
                                <span class="price-new">${product.priceNew}</span>
                            </div>
                            <div class="product-item__sale-off">${product.saleOff}</div>
                        </a>
                        <div class="product-item__quick-view">
                            <a class="quick-view--btn">Xem nhanh</a>
                        </div>
                    </div>
                </div>
            `;
        });
        document.querySelector('.product .product-list').innerHTML = html.join('');
        document.querySelector('.product .best-saller').innerHTML = html.join('');
    },

    // renderQuickView: function() {
    //     let quickViewBtn = document.querySelectorAll('.product-item__quick-view .quick-view--btn');
    //     let modal = document.querySelector('.modal');
    //     function getParent(element, selector) {
    //         while(element.parentElement) {
    //             if(element.parentElement.matches(selector)) {
    //                 return element.parentElement;
    //             }
    //             element = element.parentElement;
    //         }
    //     }
    //     for(var i = 0; i < quickViewBtn.length; i++) {
    //         quickViewBtn[i].addEventListener('click', function() {
    //             modal.classList.add('open');
    //             console.log(getParent(this, '.product-information'));
    //             let productItem = getParent(this, '.product-information');
    //             let img = productItem.querySelector('.product-item__img');
    //             // get background image url
    //             var bgImage = getComputedStyle(img).getPropertyValue('background-image').slice(4, -1).replace(/"/g, "");
    //             console.log(bgImage);
    //             const html = `
    //                 <div class="quick-view">
    //                     <div class="grid wide">
    //                         <div class="row">
    //                             <div class="col l-5">
    //                                 <div class="quick-view__img">
    //                                     <img src="${bgImage}" alt="">
    //                                 </div>
    //                                 <div class="quick-view__slider">
    //                                     <i class="quick-view-prev fa-solid fa-chevron-left"></i>
    //                                     <div class="slider-product">
    //                                         <div class="slider-product__item active">
    //                                             <img src=${url}/images/SliderQuickView/image1.png" alt="" class="item-img">
    //                                         </div>
    //                                         <div class="slider-product__item">
    //                                             <img src=${url}/images/SliderQuickView/image2.png" alt="" class="item-img">
    //                                         </div>
    //                                         <div class="slider-product__item">
    //                                             <img src=${url}/images/SliderQuickView/image3.png" alt="" class="item-img">
    //                                         </div>
    //                                         <div class="slider-product__item">
    //                                             <img src=${url}/images/SliderQuickView/image4.png" alt="" class="item-img">
    //                                         </div>
    //                                         <div class="slider-product__item">
    //                                             <img src=${url}/images/SliderQuickView/image5.png" alt="" class="item-img">
    //                                         </div>
    //                                         <div class="slider-product__item">
    //                                             <img src=${url}/images/SliderQuickView/image6.png" alt="" class="item-img">
    //                                         </div>
    //                                         <div class="slider-product__item">
    //                                             <img src=${url}/images/SliderQuickView/image7.png" alt="" class="item-img">
    //                                         </div>
    //                                     </div>
    //                                     <i class="quick-view-next fa-solid fa-chevron-right"></i>
    //                                 </div>
    //                             </div>
    //                             <div class="col l-7">
    //                                 <div class="quick-view__close-btn">
    //                                     <i class="fa-solid fa-xmark"></i>
    //                                 </div>
    //                                 <a href="#" class="quick-view__title">
    //                                     <h2>${productItem.querySelector('.product-item__name').innerText}</h2>
    //                                 </a>
    //                                 <div class="quick-view__rating">
    //                                     <span class="rating">
    //                                         <i class="star-yellow fa-solid fa-star"></i>
    //                                         <i class="star-yellow fa-solid fa-star"></i>
    //                                         <i class="star-yellow fa-solid fa-star"></i>
    //                                         <i class="star-yellow fa-solid fa-star"></i>
    //                                         <i class="fa-solid fa-star"></i>
    //                                     </span>
    //                                 </div>
    //                                 <div class="quick-view__price">
    //                                     <span class="price-new">${productItem.querySelector('.product-item__price .price-new').innerText}</span>
    //                                     <span class="price-old">${productItem.querySelector('.product-item__price .price-old').innerText}</span>
    //                                 </div>
    //                                 <div class="quick-view__size">
    //                                     <p>Kích Thước:</p>
    //                                     <form class="size-select">
    //                                         <label for="small" class="size-option">
    //                                             <input type="radio" name="size" value="s" id="small">
    //                                             <span>S</span>
    //                                         </label>
    //                                         <label for="medium" class="size-option">
    //                                             <input type="radio" name="size" value="s" id="medium">
    //                                             <span>M</span>
    //                                         </label>
    //                                         <label for="large" class="size-option">
    //                                             <input type="radio" name="size" value="L" id="large">
    //                                             <span>L</span>
    //                                         </label>
    //                                         <label for="x-large" class="size-option sold-out">
    //                                             <input type="radio" name="size" value="XL" id="x-large">
    //                                             <span>XL</span>
    //                                         </label>
    //                                     </form>
    //                                 </div>
    //                                 <div class="quick-view__quantity">
    //                                     <p>Số Lượng:</p>
    //                                     <div class="quantity-select">
    //                                         <button class="minus-btn">
    //                                             <i class="fa-solid fa-minus"></i>
    //                                         </button>
    //                                         <!-- <input type="text" value="1" role="spinbutton"> -->
    //                                         <p class="amount">0</p>
    //                                         <button class="plus-btn">
    //                                             <i class="fa-solid fa-plus"></i>
    //                                         </button>
    //                                     </div>
    //                                 </div>
    //                                 <div class="quick-view__add-cart btn">
    //                                     <i class="fa-solid fa-cart-plus"></i>
    //                                     <span>Thêm vào giỏ hàng</span>
    //                                 </div>
    //                                 <div class="quick-view__desc">
    //                                     <p>
    //                                         Sản phẩm áo thun nam nữ local brand unisex form rộng tay lỡ Vergency Rapper/RAP hàng chính hãng.
    //                                     </p>
    //                                 </div>
    //                             </div>
    //                         </div>
    //                     </div>
    //                 </div>
    //             `;
    //             document.querySelector('.modal .modal__content').innerHTML = html;
    //         });
    //     }
    // },

    handleEvents: function() {
        let quickViewBtn = document.querySelectorAll('.product-item__quick-view .quick-view--btn');
        let modal = document.querySelector('.modal');
        let modalContent = document.querySelector('.modal__content');
        let closeQuickViewBtn = document.querySelector('.quick-view__close-btn');
        let amount = document.querySelector('.amount');
        let plusBtn = document.querySelector('.plus-btn');
        let minusBtn = document.querySelector('.minus-btn');
        let amountValue = 0;
        
        function getParent(element, selector) {
            while(element.parentElement) {
                if(element.parentElement.matches(selector)) {
                    return element.parentElement;
                }
                element = element.parentElement;
            }
        }

        for(var i = 0; i < quickViewBtn.length; i++) {
            quickViewBtn[i].addEventListener('click', function() {
                modal.classList.add('open');
                let productItem = getParent(this, '.product-information');
                let img = productItem.querySelector('.product-item__img');
                // get background image url
                let bgImage = getComputedStyle(img).getPropertyValue('background-image').slice(4, -1).replace(/"/g, "");
                modal.querySelector('.quick-view__img img').setAttribute('src', bgImage);
                let listImg = modal.querySelectorAll('.slider-product__item');

                for(var i = 0; i < app.listProduct.length; i++) {
                    if(productItem.querySelector('.product-item__name').innerText === app.listProduct[i].name) {
                        console.log(app.listProduct[i].name);
                        for(var j = 0; j < listImg.length; j++) {
                            listImg[j].querySelector('img').src = app.listProduct[i].listSlideImg[j];
                        }
                    }
                }
                
                modal.querySelector('.quick-view__title h2').innerHTML = productItem.querySelector('.product-item__name').innerText;
                modal.querySelector('.quick-view__price .price-new').innerHTML = productItem.querySelector('.product-item__price .price-new').innerText;
                modal.querySelector('.quick-view__price .price-old').innerHTML = productItem.querySelector('.product-item__price .price-old').innerText;
            });
        }
        function hideQuickView() {
            modal.classList.remove('open');
        }
        closeQuickViewBtn.onclick =  hideQuickView;
        modal.addEventListener('click', hideQuickView);
        modalContent.addEventListener('click', function(e) {
            e.stopPropagation();
        });
        plusBtn.addEventListener('click', function() {
            amountValue++;
            amount.innerText = amountValue;
        });

        minusBtn.addEventListener('click', function() {
            if(amountValue > 0) amountValue--;
            amount.innerText = amountValue;
        });
    },

    start: function() {
        this.render();
        // this.renderQuickView();
        this.handleEvents();
    }
}

app.start();